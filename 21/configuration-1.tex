\documentclass{a4beamer}
\input{lecture-common.def}

\usetikzlibrary{shapes.misc,shapes.symbols}
\input{shape.human.tex}

\usepackage{listings}
\lstset{%
	morekeywords={assert},
	tabsize=4,
	showstringspaces=false,
	basicstyle=\linespread{1.25}\ttfamily\small,
	keywordstyle=\bfseries,
	commentstyle=\color{gray},
	numbers=left,
	numberstyle=\footnotesize\color{gray},
	xleftmargin=2.5em,
	texcl=true,
	extendedchars=true,
	escapechar=\$
}

\def\code#1{\texttt{#1}}
\def\codekw#1{\texttt{\textbf{#1}}}

\deftranslation[to=russian]{Fact}{Наблюдение}

\lecturetitle{Программная инженерия. Лекция №21 — Управление конфигурацией ПО (часть 1)}
\title[Конфигурация 1]{Управление конфигурацией ПО (часть 1)}
\author{Алексей Островский}
\institute{\small{Физико-технический учебно-научный центр НАН Украины}\vspace{2ex}}
\date{30 апреля 2015 г.}


\begin{document}
	\frame{\titlepage}

	\section{Введение}

	\subsection{Определение конфигурации}

	\frame{
		\frametitle{Управление конфигурацией ПО}

		\begin{Definition}
			\textbf{Конфигурация} — совокупность функциональных и/или физических характеристик оборудования 
			(\emph{hardware}), прошивок (\emph{firmware}) и ПО (\emph{software}), 
			определенных в~технической документации и реализованных программным продуктом.
		\end{Definition}

		\vspace{1ex}
		\begin{Definition}
			\textbf{Управление конфигурацией} \engterm{software control management} — процесс идентификации конфигурации 
			программной системы в заданные моменты времени с~целью:
			\begin{itemize}
				\item
				систематического контроля изменений конфигурации;
				\item
				поддержки целостности (\emph{integrity}) и отслеживаемости (\emph{traceability}) конфигурации 
				на~протяжении жизненного цикла ПО.
			\end{itemize}
		\end{Definition}
	}

	\frame{
		\frametitle{Зачем нужно управление конфигурацией?}

		\textbf{Организация и хранение изменений,} вносимых в систему:
		\begin{itemize}
			\item
			причина (исправление ошибок, адаптация, расширение функциональности);
			\item
			локализация изменений (измененные, добавленные, или удаленные файлы);
			\item
			отслеживание авторства;
			\item
			доступность актуальных версий компонентов для всей команды разработки.
		\end{itemize}

		\vspace{1ex}
		\textbf{Контроль целостности} системы:
		\begin{itemize}
			\item
			согласование изменений, вносимых различными разработчиками;
			\item
			поддержка совместимых версий отдельных компонентов системы;
			\item
			определение корректной версии компонентов для выпусков.
		\end{itemize}
	}

	\subsection{Составляющие}

	\frame{
		\frametitle{Составляющие управления конфигурацией}

		\textbf{Управление изменениями} \engterm{change management}:
		\begin{itemize}
			\item
			отслеживание и сохранение запросов на изменение от пользователей и~разработчиков; 
			\item
			оценка затрат и объема вносимых изменений;
			\item
			составление плана внесения изменений.
		\end{itemize}

		\vspace{1ex}
		\textbf{Управление версиями} \engterm{version management}:
		\begin{itemize}
			\item
			отслеживание различных версий компонент программной системы;
			\item
			предотвращение и разрешение конфликтов при внесении изменений в~компоненты.
		\end{itemize}

		\vspace{1ex}
		\figureexpl{(Рассматриваются в этой лекции.)}
	}

	\frame{
		\frametitle{Составляющие управления конфигурацией (продолжение)}

		\textbf{Построение программной системы} \engterm{system building}:
		\begin{itemize}
			\item
			организация программных компонент, данных и используемых библиотек для~построения;
			\item
			компиляция и сборка \engterm{linking} для создания выполняемых программ;
			\item
			конфигурация режима построения для создания семейства программных систем.
		\end{itemize}

		\vspace{1ex}
		\textbf{Управление выпусками} \engterm{release management}:
		\begin{itemize}
			\item
			подготовка системы для выпуска для использования вне отдела разработки;
			\item
			контроль версий выпущенных компонентов.
		\end{itemize}

		\vspace{1ex}
		\figureexpl{(Рассматриваются в следующей лекции.)}
	}

	\frame{
		\frametitle{Составляющие управления конфигурацией}

		\begin{center}
			\input{fig-conf-aspects.tex}

			\vspace{1ex}
			\figureexpl{Взаимоотношения между аспектами управления конфигурацией}
		\end{center}
	}

	\frame{
		\frametitle{Идентификация конфигурации ПО}

		\textbf{Этапы} идентификации конфигурации:
		\begin{enumerate}
			\item
			идентификация контролируемых элементов;
			\item
			создание схем идентификации для объектов и их версий;
			\item
			определение инструментов и методов для получения и управления контролируемыми элементами.
		\end{enumerate}

		\vspace{1ex}
		\textbf{Элементы} конфигурации: 
		\begin{itemize}
			\item исполняемый и исходный код;
			\item планы;
			\item спецификации и проектная документация;
			\item система тестирования;
			\item программные инструменты; 
			\item сторонние библиотеки;
			\item справочная документация.
		\end{itemize}
	}

	\section[Изменения]{Управление изменениями}
	
	\frame{
		\frametitle{Управление изменениями}

		\input{fig-conf-control.tex}

		\vspace{1ex}
		\figureexpl{%
			\textbf{Управление изменениями} — деятельность по координации и оценке реализованных изменений 
			элементов конфигурации, а также их утверждению или отбрасыванию.
		}
	}

	\subsection{Запросы на изменение}

	\frame{
		\frametitle{Запросы на изменение}

		\textbf{Содержание запроса} \engterm{issue ticket}:
		\begin{itemize}
			\item
			дата, номер;
			\item
			отправитель запроса;
			\item
			суть проблемы, возможный набросок ее решения;
			\item
			ответственный(е) за рассмотрение и имплементацию;
			\item
			характеристики (приоритет, затронутые компоненты, теги, …);
			\item
			комментарии, оценки разработчиков и т.\,п.
		\end{itemize}

		\vspace{1ex}
		\textbf{Организация запросов:}
		\begin{itemize}
			\item
			изолированная система: клиент / сервер или распределенная (напр., Bugzilla);
			\item
			часть системы управления проектом, напр., с помощью веб-интерфейса (GitHub, Google Code, …).
		\end{itemize}
	}

	\frame{
		\frametitle{Оценка запросов на изменение}

		\textbf{Валидность изменения:}
		\begin{itemize}
			\item
			Не является ли изменение результатом недопонимания системы потребителем? 
			\item
			Не реализована ли требуемая функциональность? 
			\item
			Был ли аналогичный запрос зарегистрирован ранее?
		\end{itemize}

		\vspace{1ex}
		\textbf{Полнота запроса:}
		\begin{itemize}
			\item
			Следует ли объединить запрос с аналогичными или расширить? 
			\item
			Следует ли разбить запрос на составляющие? 
			\item
			Достаточно ли четка формулировка?
		\end{itemize}
	}

	\frame{
		\frametitle{Оценка запросов на изменение (продолжение)}

		\textbf{Приоритет запроса:}
		\begin{itemize}
			\item
			важность внесения изменений (критическая ошибка vs мелкое исправление, напр., интерфейса пользователя); 
			\item
			круг потребителей, которых затрагивает изменение; 
			\item
			затраты на внесение изменения; 
			\item
			интеграция изменения в цикл выпусков программной системы.
		\end{itemize}

		\vspace{1ex}
		\textbf{Реализация запроса:}
		\begin{itemize}
			\item
			затронутые компоненты системы и~план внесения изменений; 
			\item
			влияние на функциональность (не нарушает ли изменение требования к~системе? 
			не~снижает~ли оно нефункциональные характеристики~ПО — производительность, безопасность, …); 
			\item
			тесты для проверки корректности изменения.
		\end{itemize}
	}

	\section[Версии]{Управление версиями}

	\frame{
		\frametitle{Управление версиями}

		\begin{Definition}
			\textbf{Управление версиями} \engterm{revision control, version control} — 
			аспект управления конфигурацией программного проекта, связанный с~хранением, организацией и~согласованием изменений, 
			вносимых в~данные, относящиеся к~проекту.
		\end{Definition}

		\vspace{1ex}
		\begin{center}
			\input{fig-baselines.tex}

			\figureexpl{Управление версиями включает управление уровнями \engterm{baseline} и версиями компонентов \engterm{codeline}.}
		\end{center}
	}

	\frame{
		\frametitle{Функциональность систем управления версиями}

		\begin{itemize}
			\item
			\textbf{Идентификация версий} для~компонентов программной системы; подбор версий для~выпусков системы.

			\vspace{1ex}
			\item
			\textbf{Организация хранения версий} компонентов, в~частности, минимизация потребляемой памяти при~помощи хранения изменений (delta).

			\vspace{1ex}
			\item
			Хранение \textbf{информации о вносимых изменениях}: авторство, описание, теги, обсуждение и~т.\,д.

			\vspace{1ex}
			\item
			Обеспечение поддержки \textbf{параллельной и~распределенной разработки}; разрешение конфликтов при~внесении изменений.

			\vspace{1ex}
			\item
			Поддержка \textbf{модульности}, \textbf{зависимостей} между~репозиториями.
		\end{itemize}
	}

	\subsection{Основные понятия}

	\frame{
		\frametitle{Понятия управления версиями}

		\begin{itemize}
			\item
			\textbf{Хранилище} \engterm{repository} — объект (напр., выделенный сервер), 
			хранящий все~версии конфигурируемых документов и~данные об~их~изменениях;

			\vspace{0.5ex}
			\item
			\textbf{рабочая копия} \engterm{working copy} — локальная копия документов из~хранилища, 
			соответствующих определенному моменту времени; песочница для~тестирования изменений.

			\vspace{0.5ex}
			\item
			\textbf{клонирование} \engterm{check-out, cloning} — создание локальной копии на~основе хранилища;

			\vspace{0.5ex}
			\item
			\textbf{изменение} \engterm{change, diff, delta} — атомарная операция, 
			влияющая на~конкретный элемент конфигурации (правка, создание, удаление).
		\end{itemize}
	}

	\frame{
		\frametitle{Понятия управления версиями (продолжение)}

		\begin{itemize}
			\item
			\textbf{набор изменений} \engterm{change list} — группа связанных изменений (напр., для~решения одной проблемы);

			\vspace{0.5ex}
			\item
			\textbf{фиксация} \engterm{commit, check-in} — отправка набора изменений в~хранилище для~постоянного хранения;

			\vspace{0.5ex}
			\item
			\textbf{слияние} \engterm{merge} — согласование двух наборов изменений, касающихся одних и~тех~же~документов;

			\vspace{0.5ex}
			\item
			\textbf{конфликт} \engterm{conflict} — противоречие между двумя наборами изменений при~слиянии, 
			которое должно решаться вручную разработчиком.
		\end{itemize}
	}

	\frame{
		\frametitle{Понятия управления версиями (продолжение)}

		\begin{itemize}
			\item
			\textbf{ветвь} \engterm{branch}  — копия набора файлов в~определенный момент времени, 
			обеспечивающая возможность независимого направления разработки (напр., внедрение нового компонента);

			\vspace{0.5ex}
			\item
			\textbf{ствол} \engterm{trunk, master} — основная ветвь, соответствующая главному направлению разработки; 
			другие ветви после~подготовки вливаются в~ствол.

			\vspace{0.5ex}
			\item
			\textbf{основная версия} \engterm{head} — самая новая версия ветви или~ствола в~хранилище 
			($\simeq$~указатель на~последнюю операцию фиксации для~этой~ветви);

			\vspace{0.5ex}
			\item
			\textbf{метка} \engterm{tag, label} — обозначение для группы логически связанных версий документов 
			в~хранилище (напр., версии файлов, входящих в~определенный выпуск).
		\end{itemize}
	}

	\frame{
		\frametitle{Образец схемы изменений}

		\begin{center}
			\input{fig-version-dag.tex}

			\vspace{2.5ex}
			\figureexpl{Работа с версиями документов представляется
				в виде ориентированного ациклического графа}
		\end{center}
	}

	\subsection{Организация управления версиями}

	\frame{
		\frametitle{Организация управления версиями}

		\begin{center}
			\input{fig-rc-server.tex}

			\vspace{2ex}
			\figureexpl{Организация системы управления версиями с архитектурой «клиент — сервер»}
		\end{center}
	}

	\frame{
		\frametitle{Организация управления версиями}

		\begin{center}
			\input{fig-rc-distr.tex}

			\vspace{2ex}
			\figureexpl{Организация распеделенной системы управления версиями}
		\end{center}
	}

	\frame{
		\frametitle{Организация управления версиями}

		\textbf{Архитектура «клиент — сервер»:}
		\begin{itemize}
			\item единый сервер, хранящий версии конфигурируемых документов;
			\item для операций фиксации и других необходим доступ к~серверу через~протокол связи (напр., с~помощью~HTTP).
		\end{itemize}

		\vspace{0.5ex}
		\textbf{Примеры:} CVS, Subversion.

		\vspace{2ex}
		\textbf{Распределенное управление версиями:}
		\begin{itemize}
			\item
			отсутствие выделенного хранилища, равноправность всех рабочих копий;
			\item
			рабочие копии содержат всю~информацию о~конфигурируемых элементах;
			\item
			операции фиксации, создания ветвей, слияния и~т.\,д. локальны и~не~требуют соединения с~сервером;
			\item
			согласование изменений за счет синхронизации с другими рабочими копиями.
		\end{itemize}

		\vspace{0.5ex}
		\textbf{Примеры:} Git, Mercurial.
	}

	\subsection{Характеристики СУВ}

	\frame{
		\frametitle{Характеристики СУВ}

		\textbf{Методы разрешения / предотвращения конфликтов:}
		\begin{itemize}
			\item
			слияние конфликтующих наборов изменений: выбор более походящей или~компромиссной версии каждого файла;
			\item
			замыкание \engterm{locking} файлов для предотвращения правки несколькими пользователями 
			(невозможно в~распределенных системах).
		\end{itemize}

		\vspace{1ex}
		\textbf{Метод хранения версий документов:}
		\begin{itemize}
			\item
			в виде отличий от предыдущей версии \engterm{diff};
			\item
			в виде снимков \engterm{snapshot}, т.\,е.~файлов целиком;
			\item
			смешанный способ (напр., отличия для текстовых файлов и~снимки для~двоичных).
		\end{itemize}

		\vspace{1ex}
		\textbf{Базовые объекты:}
		\begin{itemize}
			\item
			отдельные файлы;
			\item
			деревья файлов.
		\end{itemize}
	}

	\frame{
		\frametitle{Характеристики СУВ (продолжение)}

		\textbf{Автоматизация действий:}
		\begin{itemize}
			\item
			преобразование концов строки (напр., \code{\textbackslash{}r\textbackslash{}n} $\rightarrow$ \code{\textbackslash{}n});
			\item
			возможность выполнения произвольных операций при фиксации.
		\end{itemize}

		\vspace{1ex}
		\textbf{Атомарность операций фиксации} — невозможность частичного применения набора изменений, связанных с операцией.

		\vspace{1ex}
		Поддержка \textbf{переименований файлов}; учет переименованных файлов при слиянии.

		\vspace{1ex}
		\textbf{Игнорируемые файлы} рабочей копии (определяются по имени).

		\vspace{1ex}
		\textbf{Свойства файловой системы:}
		\begin{itemize}
			\item
			наличие символических ссылок;
			\item
			поддержка имен файлов в кодировке UTF-8.
		\end{itemize}
	}

	\subsection{Git}

	\frame{
		\frametitle{Пример СУВ: Git}

		\begin{Definition}
			\textbf{Git} — система управления версиями, первоначально созданная Л.~Торвальдсом для~разработки ядра~Linux.
		\end{Definition}

		\vspace{1ex}
		\textbf{Особенности:}
		\begin{itemize}
			\item распределенная; 
			\item похожа на файловую систему, в частности, имеет индекс объектов; 
			\item хранит снимки (т.\,е. документы полностью) для дерева файлов проекта; 
			\item ориентирована на использование большого числа ветвей и операций слияния.
		\end{itemize}

		\vspace{1ex}
		\textbf{Вспомогательные инструменты:}
		\begin{itemize}
			\item
			графические оболочки (напр., gitg для GTK+);
			\item
			плагины для сред разработки (напр., EGit для Eclipse);
			\item
			сайты для удаленного хранения репозиториев (напр., GitHub).
		\end{itemize}
	}

	\frame{
		\frametitle{Схема работы с файлами в Git}

		\begin{center}
			\input{fig-git-files.tex}

			\figureexpl{Статусы файлов в Git}
		\end{center}
	}

	\frame{
		\frametitle{Интерфейс GitHub}

		\ifbigpages
			\input{fig-github-big.tex}
		\else
			{\small\input{fig-github-small.tex}}
		\fi
	}

	\section{Заключение}

	\subsection{Выводы}
	
	\frame{
		\frametitle{Выводы}

		\begin{enumerate}
			\item
			Управление изменениями и версиями — важная часть управления разработкой~ПО, 
			в~особенности при~коллективной разработке.

			\item
			Движущей силой при модификации~ПО являются запросы на~изменение (change requests). 
			Инструменты для управления запросами могут быть самостоятельными приложениями 
			либо~встраиваться в~более общую систему управления разработкой.

			\item
			Системы управления версиями облегчают разработку~ПО в~нескольких направлениях 
			за~счет механизма ветвления / слияния. 

			\item
			Одна из наиболее популярных систем управления версиями — Git; 
			для~нее существуют веб-хостинги репозиториев, такие~как~GitHub.
		\end{enumerate}
	}
	
	\subsection{Материалы}
	
	\frame{
		\frametitle{Материалы}
		
		\begin{thebibliography}{9}
			\bibitem[1]{1}
			Sommerville, Ian
			\newblock Software Engineering.
			\newblock {\footnotesize Pearson, 2011. — 790 p.}

			\bibitem[2]{2}
			Лавріщева К.\,М. 
			\newblock Програмна інженерія (підручник). 
			\newblock {\footnotesize К., 2008. — 319 с.}

			\bibitem[3]{3}
			Eclipse Wiki
			\newblock EGit User Guide.
			\newblock {\footnotesize\url{http://wiki.eclipse.org/EGit/User_Guide} \\
			(руководство по использованию плагина Git для Eclipse)}
		\end{thebibliography}
	}
	
	\frame{
		\frametitle{}
		
		\begin{center}
			\Huge Спасибо за внимание!
		\end{center}
	}

\end{document}

